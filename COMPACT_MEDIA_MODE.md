# 📱 Компактный режим медиа

## Обзор

Добавлен компактный режим отображения медиафайлов в ленте постов для минималистичного вида.

## 🎯 Различия между режимами

### Компактный режим (лента постов)
- ✅ Максимум 3 превью изображений
- ✅ Фиксированная высота 96px (h-24)
- ✅ Маленький размер (max-w-xs/sm/md)
- ✅ Мелкие отступы (gap-1)
- ✅ Компактный аудио плеер
- ✅ Показывает "+N" если больше 3 изображений

### Полный режим (детальный просмотр)
- ✅ Показывает все изображения
- ✅ Адаптивный размер
- ✅ Большие отступы (gap-2)
- ✅ Полноценный аудио плеер
- ✅ Aspect ratio зависит от количества

## 📐 Размеры

### Компактный режим:
```tsx
1 изображение:  max-w-xs (320px)
2 изображения:  max-w-sm (384px)  
3 изображения:  max-w-md (448px)
Высота:         h-24 (96px)
Gap:            gap-1 (4px)
```

### Полный режим:
```tsx
Размер:    Адаптивный (100% ширины)
Высота:    Зависит от aspect ratio
Gap:       gap-2 (8px)
```

## 🖼️ MediaGallery

### API

```tsx
interface MediaGalleryProps {
  images: string[]
  className?: string
  compact?: boolean  // NEW!
}
```

### Использование

**Компактный режим (лента):**
```tsx
<MediaGallery images={urls} compact />
```

**Полный режим (пост):**
```tsx
<MediaGallery images={urls} />
```

### Логика отображения

**Компактный:**
- Показывает `images.slice(0, 3)`
- Если `images.length > 3` → показывает "+N" на последнем превью
- Клик на превью → lightbox со всеми изображениями
- Клик на "+N" → lightbox со всеми изображениями

**Полный:**
- Показывает все изображения
- Adaptive grid (1-4+ изображений)
- Клик на изображение → lightbox

## 🎵 AudioPlayer vs AudioPlayerCompact

### AudioPlayer (полный режим)

**Файл:** `components/media/audio-player.tsx`

**Возможности:**
- ✅ Play/Pause кнопка (большая)
- ✅ Progress bar с seek
- ✅ Current time / Duration
- ✅ Mute/Unmute кнопка
- ✅ Hover эффекты
- ✅ Размер: полная ширина

```tsx
<AudioPlayer url={audioUrl} />
```

### AudioPlayerCompact (компактный режим)

**Файл:** `components/media/audio-player-compact.tsx`

**Возможности:**
- ✅ Play/Pause кнопка (маленькая)
- ✅ Progress bar (только отображение)
- ✅ Duration (без current time)
- ✅ Volume icon (без контроля)
- ✅ Размер: компактный
- ✅ Высота: 44px

```tsx
<AudioPlayerCompact url={audioUrl} />
```

## 📊 Сравнение

| Элемент | Компактный | Полный |
|---------|-----------|--------|
| **Изображения** | Макс. 3 | Все |
| **Высота** | 96px | Адаптивная |
| **Ширина** | 320-448px | 100% |
| **Gap** | 4px | 8px |
| **"+N" текст** | text-sm | text-lg |
| **Аудио** | Compact player | Full player |
| **Seek** | ❌ | ✅ |
| **Mute** | ❌ | ✅ |

## 🎨 Визуальные примеры

### Компактный режим в ленте:

```
┌─────────────────────────────────────┐
│ Заголовок поста                     │
│ Текст превью...                     │
│                                      │
│ ┌───┬───┬───┐                       │
│ │ 1 │ 2 │+2 │  ← 96px высота        │
│ └───┴───┴───┘                       │
│                                      │
│ ▶ [====------] 🔊 2:34  ← Compact   │
└─────────────────────────────────────┘
```

### Полный режим в посте:

```
┌──────────────────────────────────────┐
│ Заголовок поста                      │
│                                       │
│ Полный текст поста...                │
│                                       │
│ ┌──────────┬──────────┬──────────┐  │
│ │          │          │          │  │
│ │    1     │    2     │    3     │  │
│ │          │          │          │  │
│ └──────────┴──────────┴──────────┘  │
│ ┌──────────┬──────────┐              │
│ │    4     │    5     │              │
│ └──────────┴──────────┘              │
│                                       │
│ ▶ [========-] 🔊 1:23 / 2:34  ← Full│
└──────────────────────────────────────┘
```

## 🔄 Workflow пользователя

### В ленте постов:

1. Видит компактные превью (3 шт)
2. Видит "+2" если больше изображений
3. Может кликнуть на превью → **Lightbox с ВСЕ изображениями**
4. В lightbox: навигация стрелками, счетчик, скачивание

### В детальном просмотре:

1. Видит все изображения в полном размере
2. Может кликнуть на любое → **Lightbox**
3. Полноценный аудио плеер с контролами

## 📁 Файлы

**Обновлено:**
- `components/media/media-gallery.tsx` - добавлен `compact` prop
- `components/feed/post-card.tsx` - использует `compact` режим
- `app/post/[id]/page.tsx` - использует полный режим

**Создано:**
- `components/media/audio-player-compact.tsx` - новый компонент

## ✨ Преимущества

### UX:
- ✅ Лента не перегружена большими изображениями
- ✅ Быстрый скроллинг
- ✅ Минималистичный дизайн (как в Threads)
- ✅ Понятный индикатор "+N"

### Performance:
- ✅ Меньше изображений в DOM (только 3)
- ✅ Меньший размер превью (faster loading)
- ✅ Lazy loading работает эффективнее

### Гибкость:
- ✅ Легко переключаться между режимами
- ✅ Один компонент для обоих случаев
- ✅ Lightbox всегда показывает все изображения

## 🎯 Threads-style дизайн

Компактный режим идеально вписывается в минималистичный стиль Threads:

- **Маленькие превью** - не отвлекают от контента
- **Фиксированная высота** - ровный вид ленты
- **Inline layout** - контейнер только нужной ширины
- **Тонкие отступы** - компактность
- **Subtle +N indicator** - не кричащий

## 🚀 Результат

**До:**
```
Лента постов была перегружена большими изображениями
```

**После:**
```
✨ Минималистичные компактные превью
✨ Быстрый скроллинг
✨ Threads-style дизайн
✨ При клике - полный lightbox
```

---

**Готово!** Теперь медиафайлы отображаются минималистично в ленте и полноценно при просмотре поста. 🎉
