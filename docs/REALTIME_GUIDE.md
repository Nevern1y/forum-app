# üî¥ Realtime –°–∏—Å—Ç–µ–º–∞ - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

–ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ realtime —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—É —Ñ–æ—Ä—É–º–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Supabase Realtime.

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–û–±–∑–æ—Ä](#–æ–±–∑–æ—Ä)
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
- [–•—É–∫–∏ Realtime](#—Ö—É–∫–∏-realtime)
- [–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è](#–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è)
- [–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è](#–ø—Ä–∏–º–µ—Ä—ã-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)
- [–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è](#–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è)
- [Troubleshooting](#troubleshooting)

## üéØ –û–±–∑–æ—Ä

–í—Å—è —Å–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Supabase Realtime –¥–ª—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö —É –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:

### –ß—Ç–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏?

‚úÖ **–ü–æ—Å—Ç—ã**
- –ù–æ–≤—ã–µ –ø–æ—Å—Ç—ã –ø–æ—è–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –û–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ—Å—Ç–æ–≤ (—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
- –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ—Å—Ç–æ–≤

‚úÖ **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏**
- –ù–æ–≤—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –ø–æ—è–≤–ª—è—é—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
- –£–¥–∞–ª–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤

‚úÖ **–†–µ–∞–∫—Ü–∏–∏ (–ª–∞–π–∫–∏)**
- –°—á–µ—Ç—á–∏–∫ –ª–∞–π–∫–æ–≤ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —É –≤—Å–µ—Ö
- –ë–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

‚úÖ **–°–æ–æ–±—â–µ–Ω–∏—è –≤ —á–∞—Ç–µ**
- –ù–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø–µ—á–∞—Ç–∏
- –°—Ç–∞—Ç—É—Å –ø—Ä–æ—á—Ç–µ–Ω–∏—è

‚úÖ **–î—Ä—É–∑—å—è**
- –ù–æ–≤—ã–µ –∑–∞—è–≤–∫–∏ –≤ –¥—Ä—É–∑—å—è
- –ü—Ä–∏–Ω—è—Ç–∏–µ/–æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –∑–∞—è–≤–æ–∫
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –¥—Ä—É–∑–µ–π

‚úÖ **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**
- –ù–æ–≤—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–∞

‚úÖ **–û–Ω–ª–∞–π–Ω-—Å—Ç–∞—Ç—É—Å—ã**
- –ö—Ç–æ —Å–µ–π—á–∞—Å –æ–Ω–ª–∞–π–Ω
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
hooks/
‚îú‚îÄ‚îÄ use-realtime.ts                # –ë–∞–∑–æ–≤—ã–π —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —Ö—É–∫
‚îú‚îÄ‚îÄ use-posts-realtime.ts          # –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –ø–æ—Å—Ç—ã
‚îú‚îÄ‚îÄ use-comments-realtime.ts       # –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
‚îú‚îÄ‚îÄ use-reactions-realtime.ts      # –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Ä–µ–∞–∫—Ü–∏–∏
‚îî‚îÄ‚îÄ use-friends-realtime.ts        # –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –¥—Ä—É–∑–µ–π

lib/api/
‚îî‚îÄ‚îÄ presence.ts                     # –û–Ω–ª–∞–π–Ω-—Å—Ç–∞—Ç—É—Å—ã

components/
‚îú‚îÄ‚îÄ feed/
‚îÇ   ‚îú‚îÄ‚îÄ infinite-post-list.tsx      # –°–ø–∏—Å–æ–∫ –ø–æ—Å—Ç–æ–≤ —Å realtime
‚îÇ   ‚îî‚îÄ‚îÄ post-card.tsx               # –ö–∞—Ä—Ç–æ—á–∫–∞ –ø–æ—Å—Ç–∞ —Å realtime
‚îú‚îÄ‚îÄ post/
‚îÇ   ‚îî‚îÄ‚îÄ comment-list.tsx            # –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Å realtime
‚îî‚îÄ‚îÄ messages/
    ‚îú‚îÄ‚îÄ chat-window.tsx             # –ß–∞—Ç —Å realtime
    ‚îî‚îÄ‚îÄ whatsapp-style-messages.tsx # –°–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤ —Å realtime
```

### –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Browser   ‚îÇ
‚îÇ  Component  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ
       ‚îÇ useRealtime hook
       ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Supabase  ‚îÇ
‚îÇ   Realtime  ‚îÇ
‚îÇ   Channel   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ
       ‚îÇ WebSocket
       ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Supabase   ‚îÇ
‚îÇ  Database   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üé£ –•—É–∫–∏ Realtime

### `useRealtime` - –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —Ö—É–∫

–ë–∞–∑–æ–≤—ã–π —Ö—É–∫ –¥–ª—è –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ –ª—é–±—É—é —Ç–∞–±–ª–∏—Ü—É:

```typescript
import { useRealtime } from "@/hooks/use-realtime"

useRealtime({
  table: "posts",
  event: "*", // INSERT, UPDATE, DELETE –∏–ª–∏ *
  filter: "user_id=eq.123", // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä
  onInsert: (payload) => console.log("–ù–æ–≤–∞—è –∑–∞–ø–∏—Å—å:", payload),
  onUpdate: ({ old, new }) => console.log("–û–±–Ω–æ–≤–ª–µ–Ω–æ:", old, new),
  onDelete: (payload) => console.log("–£–¥–∞–ª–µ–Ω–æ:", payload),
  onChange: (payload) => console.log("–õ—é–±–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ:", payload),
})
```

### `usePostsRealtime` - –ü–æ—Å—Ç—ã

```typescript
import { usePostsRealtime } from "@/hooks/use-posts-realtime"

usePostsRealtime({
  onNewPost: (post) => {
    console.log("–ù–æ–≤—ã–π –ø–æ—Å—Ç:", post)
    setPosts(prev => [post, ...prev])
  },
  onUpdatePost: (post) => {
    console.log("–û–±–Ω–æ–≤–ª–µ–Ω –ø–æ—Å—Ç:", post)
  },
  onDeletePost: (postId) => {
    console.log("–£–¥–∞–ª–µ–Ω –ø–æ—Å—Ç:", postId)
  },
  userId: "filter-by-user", // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
})
```

### `useCommentsRealtime` - –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏

```typescript
import { useCommentsRealtime } from "@/hooks/use-comments-realtime"

useCommentsRealtime({
  postId: "post-id", // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
  onNewComment: (comment) => {
    console.log("–ù–æ–≤—ã–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:", comment)
  },
  onUpdateComment: (comment) => {
    console.log("–û–±–Ω–æ–≤–ª–µ–Ω –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:", comment)
  },
  onDeleteComment: (commentId) => {
    console.log("–£–¥–∞–ª–µ–Ω –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:", commentId)
  },
})
```

### `useReactionsRealtime` - –†–µ–∞–∫—Ü–∏–∏

```typescript
import { useReactionsRealtime } from "@/hooks/use-reactions-realtime"

useReactionsRealtime({
  postId: "post-id",
  onNewReaction: (reaction) => {
    console.log("–ù–æ–≤–∞—è —Ä–µ–∞–∫—Ü–∏—è:", reaction)
  },
  onDeleteReaction: (reactionId) => {
    console.log("–£–¥–∞–ª–µ–Ω–∞ —Ä–µ–∞–∫—Ü–∏—è:", reactionId)
  },
  onReactionsChange: () => {
    // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å —Å—á–µ—Ç—á–∏–∫–∏
    refetchReactions()
  },
})
```

### `useFriendsRealtime` - –î—Ä—É–∑—å—è

```typescript
import { useFriendsRealtime } from "@/hooks/use-friends-realtime"

useFriendsRealtime({
  userId: currentUserId,
  onNewRequest: (request) => {
    toast.info("–ù–æ–≤–∞—è –∑–∞—è–≤–∫–∞ –≤ –¥—Ä—É–∑—å—è!")
  },
  onAcceptedRequest: (request) => {
    toast.success("–ó–∞—è–≤–∫–∞ –ø—Ä–∏–Ω—è—Ç–∞!")
  },
  onRejectedRequest: (request) => {
    toast.info("–ó–∞—è–≤–∫–∞ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∞")
  },
  onFriendsChange: () => {
    // –û–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫ –¥—Ä—É–∑–µ–π
    refetchFriends()
  },
})
```

## üîå –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### –ü—Ä–∏–º–µ—Ä: –°–ø–∏—Å–æ–∫ –ø–æ—Å—Ç–æ–≤ —Å realtime

```typescript
"use client"

import { useState } from "react"
import { usePostsRealtime } from "@/hooks/use-posts-realtime"
import { PostCard } from "./post-card"

export function PostList({ initialPosts }) {
  const [posts, setPosts] = useState(initialPosts)

  // –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ—Å—Ç–æ–≤
  usePostsRealtime({
    onNewPost: (newPost) => {
      setPosts(prev => [newPost, ...prev])
    },
    onUpdatePost: (updatedPost) => {
      setPosts(prev => 
        prev.map(p => p.id === updatedPost.id ? updatedPost : p)
      )
    },
    onDeletePost: (postId) => {
      setPosts(prev => prev.filter(p => p.id !== postId))
    },
  })

  return (
    <div>
      {posts.map(post => (
        <PostCard key={post.id} post={post} />
      ))}
    </div>
  )
}
```

### –ü—Ä–∏–º–µ—Ä: –°—á–µ—Ç—á–∏–∫ –ª–∞–π–∫–æ–≤ —Å realtime

```typescript
"use client"

import { useState } from "react"
import { useReactionsRealtime } from "@/hooks/use-reactions-realtime"

export function PostLikes({ postId, initialCount }) {
  const [count, setCount] = useState(initialCount)

  useReactionsRealtime({
    postId,
    onReactionsChange: async () => {
      // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å —Å—á–µ—Ç—á–∏–∫
      const { count: newCount } = await supabase
        .from("post_reactions")
        .select("*", { count: "exact", head: true })
        .eq("post_id", postId)
      
      if (newCount !== null) {
        setCount(newCount)
      }
    },
  })

  return <span>{count} –ª–∞–π–∫–æ–≤</span>
}
```

## ‚ö° –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

### 1. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∫–ª–∏–µ–Ω—Ç—É

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–∏–ª—å—Ç—Ä—ã –¥–ª—è –ø–æ–¥–ø–∏—Å–∫–∏ —Ç–æ–ª—å–∫–æ –Ω–∞ –Ω—É–∂–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:

```typescript
// ‚ùå –ü–ª–æ—Ö–æ - –ø–æ–ª—É—á–∞–µ–º –í–°–ï –ø–æ—Å—Ç—ã
useRealtime({ table: "posts" })

// ‚úÖ –•–æ—Ä–æ—à–æ - —Ç–æ–ª—å–∫–æ –ø–æ—Å—Ç—ã –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
useRealtime({ 
  table: "posts",
  filter: `user_id=eq.${userId}`
})
```

### 2. Debouncing –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

–ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ —á–∞—Å—Ç–æ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è:

```typescript
import { useDebouncedCallback } from 'use-debounce'

const debouncedUpdate = useDebouncedCallback(
  (data) => {
    setData(data)
  },
  500 // 500ms
)

usePostsRealtime({
  onUpdatePost: debouncedUpdate,
})
```

### 3. –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö –≤–∫–ª–∞–¥–∫–∞—Ö

```typescript
useEffect(() => {
  const handleVisibilityChange = () => {
    if (document.hidden) {
      // –û—Ç–∫–ª—é—á–∏—Ç—å realtime
      unsubscribe()
    } else {
      // –í–∫–ª—é—á–∏—Ç—å realtime –∏ –æ–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
      subscribe()
      refetch()
    }
  }

  document.addEventListener('visibilitychange', handleVisibilityChange)
  return () => {
    document.removeEventListener('visibilitychange', handleVisibilityChange)
  }
}, [])
```

### 4. –ë–∞—Ç—á–∏–Ω–≥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

```typescript
const [updates, setUpdates] = useState([])

usePostsRealtime({
  onNewPost: (post) => {
    setUpdates(prev => [...prev, post])
  },
})

// –ü—Ä–∏–º–µ–Ω—è–µ–º –±–∞—Ç—á –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã
useEffect(() => {
  const interval = setInterval(() => {
    if (updates.length > 0) {
      setPosts(prev => [...updates, ...prev])
      setUpdates([])
    }
  }, 2000)

  return () => clearInterval(interval)
}, [updates])
```

## üêõ Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: Realtime –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Realtime –≤–∫–ª—é—á–µ–Ω –≤ Supabase Dashboard:
   - Settings ‚Üí API ‚Üí Realtime ‚Üí Enable
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ RLS –ø–æ–ª–∏—Ç–∏–∫–∏ - –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø –Ω–∞ SELECT
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏ WebSocket

### –ü—Ä–æ–±–ª–µ–º–∞: –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –ø–æ–¥–ø–∏—Å–æ–∫

**–°–∏–º–ø—Ç–æ–º—ã:**
- –ú–µ–¥–ª–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞
- –°–æ–æ–±—â–µ–Ω–∏—è –≤ –∫–æ–Ω—Å–æ–ª–∏ –æ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞

**–†–µ—à–µ–Ω–∏–µ:**
```typescript
// ‚ùå –ü–ª–æ—Ö–æ - –ø–æ–¥–ø–∏—Å–∫–∞ –≤ –∫–∞–∂–¥–æ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ
{posts.map(post => (
  <PostCard key={post.id} post={post} /> // –∫–∞–∂–¥—ã–π —Å realtime
))}

// ‚úÖ –•–æ—Ä–æ—à–æ - –æ–¥–Ω–∞ –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –≤–µ—Å—å —Å–ø–∏—Å–æ–∫
<PostList posts={posts} /> // realtime –≤–Ω—É—Ç—Ä–∏ —Å–ø–∏—Å–∫–∞
```

### –ü—Ä–æ–±–ª–µ–º–∞: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

**–†–µ—à–µ–Ω–∏–µ:**
```typescript
const [posts, setPosts] = useState(initialPosts)

usePostsRealtime({
  onNewPost: (newPost) => {
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ—Ç –ª–∏ —É–∂–µ —Ç–∞–∫–æ–≥–æ –ø–æ—Å—Ç–∞
    setPosts(prev => {
      if (prev.find(p => p.id === newPost.id)) {
        return prev
      }
      return [newPost, ...prev]
    })
  },
})
```

### –ü—Ä–æ–±–ª–µ–º–∞: –£—Ç–µ—á–∫–∏ –ø–∞–º—è—Ç–∏

**–†–µ—à–µ–Ω–∏–µ:**
–•—É–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏. –ù–æ –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ —Ä—É—á–Ω—É—é –ø–æ–¥–ø–∏—Å–∫—É:

```typescript
useEffect(() => {
  const channel = supabase.channel('custom')
  
  channel.subscribe()

  // ‚úÖ –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –æ—Ç–ø–∏—Å—ã–≤–∞–π—Ç–µ—Å—å
  return () => {
    supabase.removeChannel(channel)
  }
}, [])
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–¥–ø–∏—Å–æ–∫

```typescript
// –í –±—Ä–∞—É–∑–µ—Ä–Ω–æ–π –∫–æ–Ω—Å–æ–ª–∏
supabase.getChannels() // –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–∞–Ω–∞–ª–æ–≤
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π

```typescript
useRealtime({
  table: "posts",
  onChange: (payload) => {
    console.log('[Realtime]', payload.eventType, payload.table, payload)
  },
})
```

## üéì Best Practices

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–∏–ª—å—Ç—Ä—ã** - –ø–æ–¥–ø–∏—Å—ã–≤–∞–π—Ç–µ—Å—å —Ç–æ–ª—å–∫–æ –Ω–∞ –Ω—É–∂–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
2. **–û–¥–∏–Ω –∫–∞–Ω–∞–ª –Ω–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç** - –Ω–µ —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ –º–Ω–æ–∂–µ—Å—Ç–≤–æ –ø–æ–¥–ø–∏—Å–æ–∫
3. **–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –æ—à–∏–±–∫–∏** - realtime –º–æ–∂–µ—Ç –æ—Ç–∫–ª—é—á–∏—Ç—å—Å—è
4. **–ü–æ–∫–∞–∑—ã–≤–∞–π—Ç–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã** - —É–≤–µ–¥–æ–º–ª—è–π—Ç–µ –æ –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
5. **–û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ debouncing –¥–ª—è —á–∞—Å—Ç—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [Supabase Realtime Docs](https://supabase.com/docs/guides/realtime)
- [Realtime Performance](https://supabase.com/docs/guides/realtime/performance)
- [WebSocket –≤ –±—Ä–∞—É–∑–µ—Ä–µ](https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API)

---

**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 2024
**–í–µ—Ä—Å–∏—è:** 1.0.0
