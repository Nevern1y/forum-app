# üéØ –ù–ê–ß–ù–ò–¢–ï –ó–î–ï–°–¨: –°–∏—Å—Ç–µ–º–∞ –±—ç–∫–∞–ø–∞ –∏ –æ—á–∏—Å—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö

## ‚úÖ –ß—Ç–æ –≥–æ—Ç–æ–≤–æ?

–°–æ–∑–¥–∞–Ω–∞ –ø–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –±—ç–∫–∞–ø–∞ –∏ –æ—á–∏—Å—Ç–∫–∏ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö –≤–∞—à–µ–≥–æ —Ñ–æ—Ä—É–º–∞:

### üì¶ –ß—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:
- ‚úÖ **–ë—ç–∫–∞–ø –ë–î** - –≠–∫—Å–ø–æ—Ä—Ç –≤—Å–µ—Ö 16 —Ç–∞–±–ª–∏—Ü –≤ CSV —Ñ–∞–π–ª—ã
- ‚úÖ **–ë—ç–∫–∞–ø Storage** - –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –º–µ–¥–∏–∞ —Ñ–∞–π–ª–æ–≤ –∏–∑ 4 buckets
- ‚úÖ **–û—á–∏—Å—Ç–∫–∞ –ë–î** - –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- ‚úÖ **–û—á–∏—Å—Ç–∫–∞ Storage** - –£–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º buckets

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (3 –∫–æ–º–∞–Ω–¥—ã!)

```bash
# 1. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
$env:NEXT_PUBLIC_SUPABASE_URL="https://xxxxx.supabase.co"
$env:SUPABASE_SERVICE_ROLE_KEY="your_service_role_key"

# 2. –ë—ç–∫–∞–ø
psql "YOUR_DB_URL" -f scripts/backup_data.sql
npm run backup:storage

# 3. –û—á–∏—Å—Ç–∫–∞ (–≤–≤–µ–¥–∏—Ç–µ YES –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è)
psql "YOUR_DB_URL" -f scripts/cleanup_data.sql
npm run cleanup:storage
```

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (–≤—ã–±–µ—Ä–∏—Ç–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–π –≤–∞—Ä–∏–∞–Ω—Ç)

### üèÉ –î–ª—è —Ç–µ—Ö, –∫—Ç–æ —Å–ø–µ—à–∏—Ç
‚Üí **[BACKUP_QUICKSTART.md](BACKUP_QUICKSTART.md)**
- –ö—Ä–∞—Ç–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –Ω–∞ 1 —Å—Ç—Ä–∞–Ω–∏—Ü—É
- –¢–æ–ª—å–∫–æ –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
- ~5 –º–∏–Ω—É—Ç —á—Ç–µ–Ω–∏—è

### üìñ –î–ª—è —Ç–µ—Ö, –∫—Ç–æ —Ö–æ—á–µ—Ç —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è
‚Üí **[BACKUP_AND_CLEANUP_GUIDE.md](BACKUP_AND_CLEANUP_GUIDE.md)**
- –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ —Å–æ –≤—Å–µ–º–∏ –¥–µ—Ç–∞–ª—è–º–∏
- –ü–æ—à–∞–≥–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
- Troubleshooting
- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –±—ç–∫–∞–ø–∞
- ~15 –º–∏–Ω—É—Ç —á—Ç–µ–Ω–∏—è

### üìã –î–ª—è —Ç–µ—Ö, –∫–æ–º—É –Ω—É–∂–Ω–∞ —à–ø–∞—Ä–≥–∞–ª–∫–∞
‚Üí **[BACKUP_CHEATSHEET.md](BACKUP_CHEATSHEET.md)**
- –í—Å–µ –∫–æ–º–∞–Ω–¥—ã –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ
- –ì–¥–µ –≤–∑—è—Ç—å –∫–ª—é—á–∏ –∏ –ø–∞—Ä–æ–ª–∏
- –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏ –∏ —Ä–µ—à–µ–Ω–∏—è
- –î–µ—Ä–∂–∏—Ç–µ –ø–æ–¥ —Ä—É–∫–æ–π!

---

## üóÇÔ∏è –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (5 —Ñ–∞–π–ª–æ–≤)
```
‚úì BACKUP_AND_CLEANUP_GUIDE.md (11.2 KB) - –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
‚úì BACKUP_QUICKSTART.md        (3.5 KB)  - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
‚úì BACKUP_CHEATSHEET.md         (3.5 KB)  - –®–ø–∞—Ä–≥–∞–ª–∫–∞ —Å –∫–æ–º–∞–Ω–¥–∞–º–∏
‚úì BACKUP_SUMMARY.md            (9.9 KB)  - –°–≤–æ–¥–∫–∞ –æ —Å–∏—Å—Ç–µ–º–µ
‚úì BACKUP_FILES_INDEX.md        (9.1 KB)  - –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Ñ–∞–π–ª–∞–º
```

### –°–∫—Ä–∏–ø—Ç—ã (5 —Ñ–∞–π–ª–æ–≤)
```
‚úì scripts/backup_data.sql      (8.6 KB)  - SQL –±—ç–∫–∞–ø –ë–î
‚úì scripts/cleanup_data.sql     (8.7 KB)  - SQL –æ—á–∏—Å—Ç–∫–∞ –ë–î
‚úì scripts/backup_storage.js    (5.2 KB)  - JS –±—ç–∫–∞–ø Storage
‚úì scripts/cleanup_storage.js   (6.2 KB)  - JS –æ—á–∏—Å—Ç–∫–∞ Storage
‚úì scripts/README.md            (9.2 KB)  - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–∫—Ä–∏–ø—Ç–æ–≤
```

### NPM –∫–æ–º–∞–Ω–¥—ã (–¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ package.json)
```
‚úì npm run backup:storage   - –ë—ç–∫–∞–ø Storage
‚úì npm run cleanup:storage  - –û—á–∏—Å—Ç–∫–∞ Storage
```

---

## üìä –ß—Ç–æ –±—É–¥–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ –≤ –±—ç–∫–∞–ø

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (16 —Ç–∞–±–ª–∏—Ü)
```
‚úì profiles            - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
‚úì posts               - –ü–æ—Å—Ç—ã —Å –º–µ–¥–∏–∞
‚úì comments            - –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Å –º–µ–¥–∏–∞
‚úì post_reactions      - –õ–∞–π–∫–∏/–¥–∏–∑–ª–∞–π–∫–∏ –ø–æ—Å—Ç–æ–≤
‚úì comment_reactions   - –õ–∞–π–∫–∏/–¥–∏–∑–ª–∞–π–∫–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
‚úì post_views          - –ü—Ä–æ—Å–º–æ—Ç—Ä—ã –ø–æ—Å—Ç–æ–≤
‚úì bookmarks           - –ó–∞–∫–ª–∞–¥–∫–∏
‚úì subscriptions       - –ü–æ–¥–ø–∏—Å–∫–∏
‚úì friendships         - –î—Ä—É–∂–±–∞
‚úì conversations       - –î–∏–∞–ª–æ–≥–∏
‚úì direct_messages     - –õ–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
‚úì notifications       - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
‚úì blocked_users       - –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∏
‚úì reports             - –ñ–∞–ª–æ–±—ã
‚úì tags                - –¢–µ–≥–∏
‚úì post_tags           - –°–≤—è–∑–∏ –ø–æ—Å—Ç–æ–≤ –∏ —Ç–µ–≥–æ–≤
```

### Storage (4 buckets)
```
‚úì post-images         - –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –ø–æ—Å—Ç–∞—Ö
‚úì comment-images      - –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö
‚úì media_uploads       - –ú–µ–¥–∏–∞ —Ñ–∞–π–ª—ã
‚úì audio_uploads       - –ê—É–¥–∏–æ–∑–∞–ø–∏—Å–∏
```

---

## ‚öôÔ∏è –ß—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã

### –î–ª—è SQL —Å–∫—Ä–∏–ø—Ç–æ–≤:
- ‚úÖ PostgreSQL –∫–ª–∏–µ–Ω—Ç (psql)
- ‚úÖ –°—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î
- ‚úÖ –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

### –î–ª—è JS —Å–∫—Ä–∏–ø—Ç–æ–≤:
- ‚úÖ Node.js >= 14
- ‚úÖ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
  - `NEXT_PUBLIC_SUPABASE_URL`
  - `SUPABASE_SERVICE_ROLE_KEY`

**–ì–¥–µ –≤–∑—è—Ç—å?**
‚Üí Supabase Dashboard ‚Üí Settings ‚Üí Database (–¥–ª—è DB URL)
‚Üí Supabase Dashboard ‚Üí Settings ‚Üí API (–¥–ª—è –∫–ª—é—á–µ–π)

---

## ‚ö†Ô∏è –í–∞–∂–Ω–æ –∑–Ω–∞—Ç—å!

### –û—á–∏—Å—Ç–∫–∞ –Ω–µ–æ–±—Ä–∞—Ç–∏–º–∞!
- ‚ùå –£–¥–∞–ª—è—é—Ç—Å—è –í–°–ï –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚ùå –£–¥–∞–ª—è—é—Ç—Å—è –í–°–ï –º–µ–¥–∏–∞ —Ñ–∞–π–ª—ã
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î –æ—Å—Ç–∞–µ—Ç—Å—è (—Ç–∞–±–ª–∏—Ü—ã, –∏–Ω–¥–µ–∫—Å—ã, RLS)
- ‚úÖ Storage buckets –æ—Å—Ç–∞—é—Ç—Å—è (—É–¥–∞–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ñ–∞–π–ª—ã)

### –í—Å–µ–≥–¥–∞ –¥–µ–ª–∞–π—Ç–µ –±—ç–∫–∞–ø –ø–µ—Ä–µ–¥ –æ—á–∏—Å—Ç–∫–æ–π!
1. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –±—ç–∫–∞–ø –ë–î
2. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –±—ç–∫–∞–ø Storage
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±—ç–∫–∞–ø!**
4. –¢–æ–ª—å–∫–æ –ø–æ—Ç–æ–º –æ—á–∏—â–∞–π—Ç–µ

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–æ—Ä—è–¥–æ–∫ –¥–µ–π—Å—Ç–≤–∏–π

### –ü–µ—Ä–≤—ã–π —Ä–∞–∑ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ?
```
1. –ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ BACKUP_QUICKSTART.md
2. –ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ —Å—Ç—Ä–æ–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏ –∫–ª—é—á–∏
3. –°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É –¥–ª—è –±—ç–∫–∞–ø–∞
4. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –±—ç–∫–∞–ø –ë–î
5. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –±—ç–∫–∞–ø Storage
6. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
7. (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –í—ã–ø–æ–ª–Ω–∏—Ç–µ –æ—á–∏—Å—Ç–∫—É
```

### –£–∂–µ –∑–Ω–∞–∫–æ–º—ã —Å –ø—Ä–æ—Ü–µ—Å—Å–æ–º?
```
1. –û—Ç–∫—Ä–æ–π—Ç–µ BACKUP_CHEATSHEET.md
2. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—ã –∏–∑ —à–ø–∞—Ä–≥–∞–ª–∫–∏
3. –ì–æ—Ç–æ–≤–æ!
```

---

## üÜò –ü–æ–º–æ—â—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

### –ü—Ä–æ–±–ª–µ–º—ã —Å –±—ç–∫–∞–ø–æ–º?
‚Üí –°–º. **BACKUP_AND_CLEANUP_GUIDE.md** ‚Üí —Ä–∞–∑–¥–µ–ª "Troubleshooting"

### –ù—É–∂–Ω–∞ —Å–ø—Ä–∞–≤–∫–∞ –ø–æ –∫–æ–º–∞–Ω–¥–∞–º?
‚Üí –°–º. **BACKUP_CHEATSHEET.md** ‚Üí "–ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏"

### –•–æ—Ç–∏—Ç–µ –ø–æ–Ω—è—Ç—å, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç —Å–∫—Ä–∏–ø—Ç—ã?
‚Üí –°–º. **scripts/README.md**

### –ù—É–∂–Ω–∞ –ø–æ–ª–Ω–∞—è –∫–∞—Ä—Ç–∏–Ω–∞?
‚Üí –°–º. **BACKUP_SUMMARY.md**

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±—ç–∫–∞–ø–∞

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –±—ç–∫–∞–ø–∞ —É –≤–∞—Å –±—É–¥–µ—Ç:

```
forum-app-backup/
‚îú‚îÄ‚îÄ backup_profiles.csv
‚îú‚îÄ‚îÄ backup_posts.csv
‚îú‚îÄ‚îÄ backup_comments.csv
‚îú‚îÄ‚îÄ backup_post_reactions.csv
‚îú‚îÄ‚îÄ backup_comment_reactions.csv
‚îú‚îÄ‚îÄ backup_post_views.csv
‚îú‚îÄ‚îÄ backup_bookmarks.csv
‚îú‚îÄ‚îÄ backup_subscriptions.csv
‚îú‚îÄ‚îÄ backup_friendships.csv
‚îú‚îÄ‚îÄ backup_conversations.csv
‚îú‚îÄ‚îÄ backup_direct_messages.csv
‚îú‚îÄ‚îÄ backup_notifications.csv
‚îú‚îÄ‚îÄ backup_blocked_users.csv
‚îú‚îÄ‚îÄ backup_reports.csv
‚îú‚îÄ‚îÄ backup_tags.csv
‚îú‚îÄ‚îÄ backup_post_tags.csv
‚îú‚îÄ‚îÄ backup_statistics.txt          ‚Üê –í–∞–∂–Ω–æ! –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —ç—Ç–æ
‚îî‚îÄ‚îÄ storage/
    ‚îú‚îÄ‚îÄ post-images/
    ‚îú‚îÄ‚îÄ comment-images/
    ‚îú‚îÄ‚îÄ media_uploads/
    ‚îî‚îÄ‚îÄ audio_uploads/
```

---

## ‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫

–ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º:
- [ ] –ü—Ä–æ—á–∏—Ç–∞–ª –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏–ª psql
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏–ª Node.js
- [ ] –ü–æ–¥–≥–æ—Ç–æ–≤–∏–ª —Å—Ç—Ä–æ–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î
- [ ] –ü–æ–¥–≥–æ—Ç–æ–≤–∏–ª SUPABASE_SERVICE_ROLE_KEY
- [ ] –°–æ–∑–¥–∞–ª –ø–∞–ø–∫—É –¥–ª—è –±—ç–∫–∞–ø–∞

–ü–æ—Å–ª–µ –±—ç–∫–∞–ø–∞:
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª CSV —Ñ–∞–π–ª—ã
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª backup_statistics.txt
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª –º–µ–¥–∏–∞ —Ñ–∞–π–ª—ã
- [ ] –°–æ—Ö—Ä–∞–Ω–∏–ª –±—ç–∫–∞–ø –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ–º –º–µ—Å—Ç–µ

–ü–µ—Ä–µ–¥ –æ—á–∏—Å—Ç–∫–æ–π:
- [ ] **–ë—ç–∫–∞–ø –≤—ã–ø–æ–ª–Ω–µ–Ω –∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω!**
- [ ] –ü–æ–Ω—è–ª, —á—Ç–æ —ç—Ç–æ –Ω–µ–æ–±—Ä–∞—Ç–∏–º–æ
- [ ] –ì–æ—Ç–æ–≤ –≤–≤–µ—Å—Ç–∏ "YES" –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è

---

## üéâ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

–í—ã–±–µ—Ä–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø–æ –≤–∞—à–∏–º –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—è–º –∏ –Ω–∞—á–∏–Ω–∞–π—Ç–µ!

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º:**
- –ù–æ–≤–∏—á–∫–∞–º ‚Üí [BACKUP_QUICKSTART.md](BACKUP_QUICKSTART.md)
- –û–ø—ã—Ç–Ω—ã–º ‚Üí [BACKUP_CHEATSHEET.md](BACKUP_CHEATSHEET.md)
- –î–µ—Ç–∞–ª–∏ ‚Üí [BACKUP_AND_CLEANUP_GUIDE.md](BACKUP_AND_CLEANUP_GUIDE.md)

---

## üí° –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- **–í–µ—Ä—Å–∏—è:** 1.0
- **–î–∞—Ç–∞:** 13 –æ–∫—Ç—è–±—Ä—è 2025
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ Production Ready
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ:** –î–∞
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è, –ø—Ä–æ–≤–µ—Ä–∫–∏

---

**üöÄ –ù–∞—á–Ω–∏—Ç–µ —Å [BACKUP_QUICKSTART.md](BACKUP_QUICKSTART.md)**
