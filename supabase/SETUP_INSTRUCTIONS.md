# Supabase Setup Instructions

–°–ª–µ–¥—É–π—Ç–µ —ç—Ç–∏–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö Supabase –¥–ª—è –≤–∞—à–µ–≥–æ —Ñ–æ—Ä—É–º–∞.

## üìã –®–∞–≥ 1: –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏

### –í–∞—Ä–∏–∞–Ω—Ç A: –ß–µ—Ä–µ–∑ Supabase Dashboard (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. –û—Ç–∫—Ä–æ–π—Ç–µ [Supabase Dashboard](https://app.supabase.com)
2. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **SQL Editor** (–∏–∫–æ–Ω–∫–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö –≤ –ª–µ–≤–æ–º –º–µ–Ω—é)
4. –°–æ–∑–¥–∞–π—Ç–µ **New Query**
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `migrations/run_all_migrations.sql`
6. –í—Å—Ç–∞–≤—å—Ç–µ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä –∏ –Ω–∞–∂–º–∏—Ç–µ **Run**
7. –î–æ–∂–¥–∏—Ç–µ—Å—å —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è ‚úÖ

### –í–∞—Ä–∏–∞–Ω—Ç B: –ß–µ—Ä–µ–∑ Supabase CLI

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Supabase CLI (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
npm install -g supabase

# –í–æ–π–¥–∏—Ç–µ –≤ –∞–∫–∫–∞—É–Ω—Ç
supabase login

# –°–≤—è–∂–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç
supabase link --project-ref YOUR_PROJECT_REF

# –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏
supabase db push
```

## üîê –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ .env.local

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∞—à —Ñ–∞–π–ª `.env.local` —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:

```env
NEXT_PUBLIC_SUPABASE_URL=https://teftcesgqqwhqhdiornh.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_anon_key_here
```

## ‚úÖ –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–π

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã:

### –í Supabase Dashboard:

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Table Editor**
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å—É—â–µ—Å—Ç–≤—É—é—Ç —Ç–∞–±–ª–∏—Ü—ã:
   - ‚úÖ `profiles` (—Å –Ω–æ–≤—ã–º–∏ –ø–æ–ª—è–º–∏: location, website, privacy settings)
   - ‚úÖ `posts` (—Å –ø–æ–ª–µ–º `is_pinned`)
   - ‚úÖ `reports` (–Ω–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞)
   - ‚úÖ `blocked_users` (–Ω–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞)

3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Storage**
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–æ–∑–¥–∞–Ω—ã buckets:
   - ‚úÖ `avatars` (public, 2MB limit)
   - ‚úÖ `post-images` (public, 5MB limit)

## üß™ –®–∞–≥ 4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π

–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ:

### 1. –ü—Ä–æ—Ñ–∏–ª–∏
```
‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –∞–≤–∞—Ç–∞—Ä–∞
‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏–µ location –∏ website
‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤/–ø–æ–¥–ø–∏—Å–æ–∫ (–º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ)
‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```

### 2. –ü–æ—Å—Ç—ã
```
‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Å—Ç–∞ —Å markdown
‚úÖ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–≤–æ–µ–≥–æ –ø–æ—Å—Ç–∞
‚úÖ –ó–∞–∫—Ä–µ–ø–ª–µ–Ω–∏–µ –ø–æ—Å—Ç–∞ (–¥–ª—è –∞–≤—Ç–æ—Ä–∞)
‚úÖ –ß–µ—Ä–Ω–æ–≤–∏–∫–∏ (–∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ)
```

### 3. –ú–æ–¥–µ—Ä–∞—Ü–∏—è
```
‚úÖ –ñ–∞–ª–æ–±–∞ –Ω–∞ –ø–æ—Å—Ç/–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
‚úÖ –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
‚úÖ Emoji —Ä–µ–∞–∫—Ü–∏–∏ –Ω–∞ –ø–æ—Å—Ç—ã
```

### 4. –ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å
```
‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏–µ –≤–∏–¥–∏–º–æ—Å—Ç–∏ –ø—Ä–æ—Ñ–∏–ª—è
‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
‚úÖ –†–∞–∑—Ä–µ—à–µ–Ω–∏—è –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
```

## üîß –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞: "permission denied for table profiles"

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ RLS (Row Level Security) –ø–æ–ª–∏—Ç–∏–∫–∏:

```sql
-- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª–∏—Ç–∏–∫ –¥–ª—è profiles
SELECT * FROM pg_policies WHERE tablename = 'profiles';
```

### –û—à–∏–±–∫–∞: "bucket already exists"

**–†–µ—à–µ–Ω–∏–µ:** –ú–∏–≥—Ä–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `ON CONFLICT DO UPDATE`, –æ—à–∏–±–∫–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∞.

### –û—à–∏–±–∫–∞: "function gen_random_uuid() does not exist"

**–†–µ—à–µ–Ω–∏–µ:** –í–∫–ª—é—á–∏—Ç–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ pgcrypto:

```sql
CREATE EXTENSION IF NOT EXISTS pgcrypto;
```

### Storage –ø–æ–ª–∏—Ç–∏–∫–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç

**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ storage –ø–æ–ª–∏—Ç–∏–∫–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã:

```sql
-- –ü—Ä–æ—Å–º–æ—Ç—Ä storage –ø–æ–ª–∏—Ç–∏–∫
SELECT * FROM storage.objects_policies;
```

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–ü–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–π –≤–∞—à–∞ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –±—É–¥–µ—Ç –∏–º–µ—Ç—å:

### –¢–∞–±–ª–∏—Ü—ã:
- `profiles` - –ü—Ä–æ—Ñ–∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ)
- `posts` - –ü–æ—Å—Ç—ã (—Å is_pinned, updated_at)
- `comments` - –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ (—Å updated_at)
- `tags` - –¢–µ–≥–∏
- `post_tags` - –°–≤—è–∑—å –ø–æ—Å—Ç–æ–≤ –∏ —Ç–µ–≥–æ–≤
- `subscriptions` - –ü–æ–¥–ø–∏—Å–∫–∏
- `post_reactions` - –†–µ–∞–∫—Ü–∏–∏ (–ª–∞–π–∫–∏ + —ç–º–æ–¥–∑–∏)
- `reports` - –ñ–∞–ª–æ–±—ã ‚≠ê –ù–û–í–ê–Ø
- `blocked_users` - –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∏ ‚≠ê –ù–û–í–ê–Ø

### Storage Buckets:
- `avatars` - –ê–≤–∞—Ç–∞—Ä—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (2MB, images only)
- `post-images` - –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –ø–æ—Å—Ç–∞—Ö (5MB, images only)

### –§—É–Ω–∫—Ü–∏–∏:
- `update_updated_at_column()` - –¢—Ä–∏–≥–≥–µ—Ä –¥–ª—è –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è updated_at

### –ò–Ω–¥–µ–∫—Å—ã:
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ:
  - –ó–∞–∫—Ä–µ–ø–ª–µ–Ω–Ω—ã–º –ø–æ—Å—Ç–∞–º
  - –û—Ç—á–µ—Ç–∞–º –º–æ–¥–µ—Ä–∞—Ü–∏–∏
  - –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  - –†–µ–∞–∫—Ü–∏—è–º

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏
2. ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü
3. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∑–∞–≥—Ä—É–∑–∫—É –∞–≤–∞—Ç–∞—Ä–∞
4. ‚úÖ –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π –ø–æ—Å—Ç
5. ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Å–µ –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Supabase Dashboard ‚Üí Logs
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ .env.local —Ñ–∞–π–ª
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ø–æ—Å–ª–µ–¥–Ω—é—é –≤–µ—Ä—Å–∏—é Supabase –∫–ª–∏–µ–Ω—Ç–∞

---

**–ì–æ—Ç–æ–≤–æ!** üéâ –í–∞—à —Ñ–æ—Ä—É–º —Ç–µ–ø–µ—Ä—å –∏–º–µ–µ—Ç –ø–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä —Ñ—É–Ω–∫—Ü–∏–π —Å –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–π –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö!
